services:
  # Backend service
  - type: web
    name: "e-comers-api"
    runtime: "node"
    rootDir: "api"
    buildCommand: "npm install"
    startCommand: "npm start"
    envVars:
      - key: "MONGODB_URI"
        sync: false
      - key: "JWT_SECRET"
        generateValue: true
      - key: "NODE_ENV"
        value: "production"

  # Frontend service
  - type: web
    name: "e-comers-frontend"
    runtime: "static"
    rootDir: "frontend"
    buildCommand: "npm install && npm run build"
    staticPublishPath: "dist"
    envVars:
      - key: "VITE_API_URL"
        value: "https://e-comers-api.onrender.com/api"
